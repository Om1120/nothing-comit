;/*FB_PKG_DELIM*/

__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,SUBMITTED:1});i.default=e}),66);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("bot_feedback_kind",e[0]),r[0].set("bot_response_id",e[2]),r[0].set("feedback_kind_type",e[0]),r[0].set("bot_id",e[3]),r[0].set("message_id",e[4]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",t.i64.cast([0,756]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(n){return t.db.table(315).fetch([[[e[2]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,0]):(n=a.item,r[2]=n.feedbackSubmissionStatus)})},function(n){return t.i64.eq(r[2],t.i64.cast([0,0]))?t.db.table(315).add({botResponseId:e[2],feedbackSubmissionStatus:t.i64.cast([0,1]),feedbackKindType:e[0]}):t.forEach(t.db.table(315).fetch([[[e[2]]]]),function(n){var r=n.update,o=n.item;return r({feedbackSubmissionStatus:t.i64.cast([0,1]),feedbackKindType:e[0]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure",e.__tables__=["ai_bot_feedback_submission_status"],a.exports=e}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSubmitGenAIBotFeedback"),a.botFeedbackKind,a.feedbackKindType,a.botResponseId,a.botId,a.messageId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWV2MessageReactionHooks",["EmojiRenderer","I64","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){return e.map(function(e,t){var n=o("EmojiRenderer").parse(e).map(function(e){return e.emoji});return n.length!==1?"":n[0].join("")}).filter(function(e){return e!==""})}function c(e,t){var n=(s||(s=r("useReStore")))(),a=o("MWPActor.react").useActor(),l=o("ReQLSuspense").useFirst(function(){return t!=null&&e!=null?o("ReQL").fromTableAscending(n.tables.reactions).getKeyRange(t,e,a):o("ReQL").empty()},[a,n,e,t],i.id+":38");if(l!=null)return l}function d(t,n){var a=(s||(s=r("useReStore")))(),l=o("ReQLSuspense").useArray(function(){return n!=null&&t!=null?o("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(n,t).filter(function(t){return t.viewerIsReactor&&(e||(e=o("I64"))).gt(t.count,(e||(e=o("I64"))).zero)}).map(function(e){var t=o("ReQLSuspense").first(o("ReQL").fromTableAscending(a.tables.reaction_v2_types).getKeyRange(e.reactionFbid),i.id+":70");return[t==null?void 0:t.reactionLiteral,t==null?void 0:t.reactionLiteralVariant16].filter(Boolean)}):o("ReQL").empty()},[a,n,t],i.id+":60").flat(),c=u(l);return c}function m(e,t){var n=(s||(s=r("useReStore")))(),a=o("ReQLSuspense").useFirst(function(){return t!=null&&e!=null?o("ReQL").fromTableAscending(n.tables.reactions_v2).getKeyRange(t,e).filter(function(e){return e.viewerIsReactor}):o("ReQL").empty()},[n,e,t],i.id+":94");return o("ReQLSuspense").useFirst(function(){return a?o("ReQL").fromTableAscending(n.tables.reaction_v2_types).getKeyRange(a.reactionFbid).map(function(e){return e.reactionLiteral}):o("ReQL").empty()},[n,a],i.id+":104")}var p={useSelectedReaction:c,useSelectedReactionsV2:d,useSelectedReactionV2:m};l.MWV2MessageReactionHooks=p}),98);
__d("isDeliveryStatusErrorState",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.type==="Error"||e.type==="RetriableError"}i.default=e}),66);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=(u||(u=r("useReStore")))(),a=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableDescending(n.tables.ai_bot_feedback_submission_status).getKeyRange(t!=null?t:"").filter(function(t){return(e||(e=o("I64"))).equal(t.feedbackSubmissionStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}).map(function(e){return e.feedbackSubmissionStatus})},[n,t],i.id+":25");return a}l.default=c}),98);
__d("useIGDIsCannesThread.react",["I64","LSContactReachabilityStatusType","LSIntEnum","react-compiler-runtime","useContactReachabilityStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=o("react-compiler-runtime").c(2),i=o("useContactReachabilityStatus").useContactReachabilityStatus(t,n),l;a[0]!==i?(l=i!=null&&(e||(e=o("I64"))).equal(i,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactReachabilityStatusType").UNREACHABLE_R_ACCOUNT_TEEN_INTERACTION)),a[0]=i,a[1]=l):l=a[1];var u=l;return u}l.default=u}),98);
__d("useIGDIsGenAiReelsPlugin",["I64","LSIntEnum","MNLSXMALayoutType","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=o("react-compiler-runtime").c(10),a=(u||(u=r("useReStore")))(),l;n[0]!==a.tables.attachments||n[1]!==t.messageId||n[2]!==t.threadKey?(l=function(){return o("ReQL").fromTableDescending(a.tables.attachments).getKeyRange(t.threadKey,t.messageId)},n[0]=a.tables.attachments,n[1]=t.messageId,n[2]=t.threadKey,n[3]=l):l=n[3];var c;n[4]!==a||n[5]!==t?(c=[a,t],n[4]=a,n[5]=t,n[6]=c):c=n[6];var d=o("ReQLSuspense").useFirst(l,c,i.id+":24");if(t.botResponseId==null||d==null)return!1;var m;return n[7]!==d.hasXma||n[8]!==d.xmaLayoutType?(m=d.hasXma&&d.xmaLayoutType!=null&&(e||(e=o("I64"))).equal(d.xmaLayoutType,(s||(s=o("LSIntEnum"))).ofNumber(r("MNLSXMALayoutType").PORTRAIT)),n[7]=d.hasXma,n[8]=d.xmaLayoutType,n[9]=m):m=n[9],m}l.default=c}),98);
__d("useIGDMessageAttachment",["I64","LSIntEnum","MessagingAttachmentType","ReQL","ReQLSuspense","mwpMessageHasAttachment","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n){var a=o("react-compiler-runtime").c(15),l;a[0]!==t?(l=r("mwpMessageHasAttachment")(t),a[0]=t,a[1]=l):l=a[1];var s=l,u,d;a[2]!==e.tables.attachments||a[3]!==s||a[4]!==t.messageId||a[5]!==n?(u=function(){return s?o("ReQL").fromTableAscending(e.tables.attachments,["attachmentType","isSharable","stickerType","xmaLayoutType"]).getKeyRange(n,t.messageId):o("ReQL").empty()},d=[s,e.tables.attachments,n,t.messageId],a[2]=e.tables.attachments,a[3]=s,a[4]=t.messageId,a[5]=n,a[6]=u,a[7]=d):(u=a[6],d=a[7]);var m=o("ReQLSuspense").useArray(u,d,i.id+":43"),p=m[0],_=m.length>1,f;a[8]!==m||a[9]!==_?(f=_&&m.some(c),a[8]=m,a[9]=_,a[10]=f):f=a[10];var g=f,h;return a[11]!==p||a[12]!==_||a[13]!==g?(h={attachment:p,hasMultipleAttachments:_,isVideoStack:g},a[11]=p,a[12]=_,a[13]=g,a[14]=h):h=a[14],h}function c(t){return(e||(e=o("I64"))).equal(t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))}l.default=u}),98);
__d("useIGDMessageReply.react",["fbt","IGDThreadListNewMessageLoggingDataContext","MWMediaManager","MWPReplyContext.react","MessengerWebUXLogger","react","react-compiler-runtime","useIGDMediaMangerUploadFailedToast"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).useContext;function c(e,t,n){var a=o("react-compiler-runtime").c(13),i=u(o("MWPReplyContext.react").MWPReplyContext),l=i.setReply,c=r("useIGDMediaMangerUploadFailedToast")(),d;a[0]!==c||a[1]!==t?(d={showUploadFailureToast:c,thread:t},a[0]=c,a[1]=t,a[2]=d):d=a[2];var m=o("MWMediaManager").useMediaManager(d),p=m.resetAttachments,_=r("MessengerWebUXLogger").useInteractionLogger(),f=o("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),g;a[3]!==f||a[4]!==_||a[5]!==e||a[6]!==n||a[7]!==p||a[8]!==l?(g=function(r){_==null||_({eventName:"message_reply",extraData:{},flowInstanceId:f}),l({isReported:e.takedownState!=null,messageId:e.messageId,offlineThreadingId:e.offlineThreadingId,sendStatusV2:e.sendStatusV2,text:e.text,threadKey:e.threadKey,timestampMs:e.timestampMs},e.threadKey),p(),n==null||n()},a[3]=f,a[4]=_,a[5]=e,a[6]=n,a[7]=p,a[8]=l,a[9]=g):g=a[9];var h=g,y;a[10]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Reply"),a[10]=y):y=a[10];var C=y,b;return a[11]!==h?(b=[h,C],a[11]=h,a[12]=b):b=a[12],b}l.default=c}),226);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a=o("MWPContactContext.react").useMWPContactStableContext(),i=a.contact;return t==null||!n?!1:i!=null&&(e||(e=o("I64"))).equal(i.contactTypeExact,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT))}l.default=u}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWMessageDeliveryStatus","MWPThreadCapabilitiesContext","isDeliveryStatusErrorState"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),a=n.canUnsendMessage;if(r("isDeliveryStatusErrorState")(o("MWMessageDeliveryStatus").getFromSendStatus(t.sendStatusV2)))return!1;var i=t.cannotUnsendReason!=null?(e||(e=o("I64"))).equal(t.cannotUnsendReason,(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0;return a&&i}l.default=u}),98);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(t,n,a,l){var u=(e||(e=r("useReStore")))();return c(function(e){r("promiseDone")(u.runInTransaction(function(n){return r("LSSubmitGenAIBotFeedbackStoredProcedure")(r("LSFactory")(n),{botFeedbackKind:(s||(s=o("LSIntEnum"))).ofNumber(e),botId:a,botResponseId:t||"",feedbackKindType:s.ofNumber(e),messageId:l})},"readwrite",void 0,void 0,i.id+":33"),n)},[u,t,a,l,n])}l.default=d}),98);